2025-06-08 19:47:39,716 - (api_server.py) - INFO - Loading faiss.
2025-06-08 19:47:39,747 - (api_server.py) - INFO - Successfully loaded faiss.
2025-06-08 19:47:45,451 - (api_server.py) - INFO - Using device: cuda
2025-06-08 19:47:45,452 - (api_server.py) - INFO - Loading CLIP model...
2025-06-08 19:47:49,022 - (api_server.py) - INFO - CLIP model loaded successfully
2025-06-08 19:47:49,022 - (api_server.py) - INFO - Loading BLIP model...
2025-06-08 19:47:52,239 - (api_server.py) - INFO - BLIP model loaded successfully
2025-06-08 19:47:52,239 - (api_server.py) - INFO - Configuring Gemini API...
2025-06-08 19:47:52,240 - (api_server.py) - INFO - Gemini API configured successfully
2025-06-08 19:47:52,240 - (api_server.py) - INFO - === Starting API Server Initialization ===
2025-06-08 19:47:52,241 - (api_server.py) - INFO - Initializing FashionRecommender...
2025-06-08 19:47:52,241 - (api_server.py) - INFO - Initializing FashionRecommender...
2025-06-08 19:47:52,242 - (api_server.py) - INFO - Loading models...
2025-06-08 19:47:58,616 - (api_server.py) - INFO - Models loaded successfully!
2025-06-08 19:47:58,617 - (api_server.py) - INFO - Loading embeddings and metadata...
2025-06-08 19:47:58,699 - (api_server.py) - INFO - img_embs shape: (39996, 512), sample: [-0.05377   0.01663   0.01843   0.00818   0.005554]
2025-06-08 19:47:58,700 - (api_server.py) - INFO - txt_embs shape: (39996, 512), sample: [ 0.01625503 -0.00373982 -0.01780827 -0.00368375 -0.02755962]
2025-06-08 19:47:58,700 - (api_server.py) - INFO - valid_indices shape: (39996,), sample: [0 1 2 3 4]
2025-06-08 19:47:58,701 - (api_server.py) - INFO - Building FAISS indexes...
2025-06-08 19:47:58,908 - (api_server.py) - INFO - Indexes built successfully!
2025-06-08 19:47:58,914 - (api_server.py) - INFO - Loading dataset...
2025-06-08 19:47:59,090 - (api_server.py) - INFO - DF shape: (39996, 14)
2025-06-08 19:47:59,107 - (api_server.py) - INFO - DF head:   productId gender  ...                                               link price
0     15970    Men  ...  http://assets.myntassets.com/v1/images/style/p...  2615
1     39386    Men  ...  http://assets.myntassets.com/v1/images/style/p...  2381
2     59263  Women  ...  http://assets.myntassets.com/v1/images/style/p...  2437
3     21379    Men  ...  http://assets.myntassets.com/v1/images/style/p...  2947
4     53759    Men  ...  http://assets.myntassets.com/v1/images/style/p...  1717

[5 rows x 14 columns]

2025-06-08 19:47:59,107 - (api_server.py) - INFO - DF columns: ['productId', 'gender', 'masterCategory', 'subCategory', 'articleType', 'baseColour', 'season', 'year', 'usage', 'productDisplayName', 'image_path', 'text', 'link', 'price']
2025-06-08 19:47:59,108 - (api_server.py) - INFO - Dataset loaded with 39996 records
2025-06-08 19:47:59,108 - (api_server.py) - INFO - FashionRecommender initialized successfully
2025-06-08 19:47:59,108 - (api_server.py) - INFO - FashionRecommender initialized successfully
2025-06-08 19:47:59,109 - (api_server.py) - INFO - === API Server Initialization Complete ===
2025-06-08 19:47:59,114 - (api_server.py) - INFO - === Starting FastAPI Server ===
2025-06-08 19:47:59,115 - (api_server.py) - INFO - Server will be available at http://0.0.0.0:5001
2025-06-08 19:48:27,638 - (api_server.py) - INFO - === Starting Recommendation Processing ===
2025-06-08 19:48:27,643 - (api_server.py) - INFO - Request received - Text present: True, Image present: True
2025-06-08 19:48:27,644 - (api_server.py) - INFO - Processing image from request...
2025-06-08 19:48:27,645 - (api_server.py) - INFO - === Starting Base64 Image Processing ===
2025-06-08 19:48:27,647 - (api_server.py) - INFO - Removed data URL prefix from base64 string
2025-06-08 19:48:27,648 - (api_server.py) - INFO - First 100 chars of base64 image: iVBORw0KGgoAAAANSUhEUgAAAcsAAAHLCAYAAACnArNHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIA
2025-06-08 19:48:27,650 - (api_server.py) - INFO - Ensured temp directory exists at: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp
2025-06-08 19:48:27,653 - (api_server.py) - INFO - Generated temp file path: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg
2025-06-08 19:48:27,666 - (api_server.py) - INFO - Successfully saved image to: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg
2025-06-08 19:48:27,667 - (api_server.py) - INFO - === Base64 Image Processing Complete ===
2025-06-08 19:48:27,668 - (api_server.py) - INFO - Image processed and saved to: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg
2025-06-08 19:48:27,669 - (api_server.py) - INFO - Calling recommender.recommend() with parameters:
2025-06-08 19:48:27,670 - (api_server.py) - INFO - - Image path: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg
2025-06-08 19:48:27,671 - (api_server.py) - INFO - - Text prompt: Recommend some pants
2025-06-08 19:48:27,673 - (api_server.py) - INFO - - K value: 10
2025-06-08 19:48:27,674 - (api_server.py) - INFO - recommend called with img: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg, prompt: Recommend some pants
2025-06-08 19:48:27,680 - (api_server.py) - INFO - Processing image input...
2025-06-08 19:48:33,346 - (api_server.py) - INFO - Detected input category: Shoes
2025-06-08 19:48:33,348 - (api_server.py) - INFO - Processing combined image and text input...
2025-06-08 19:48:33,497 - (api_server.py) - INFO - Similar product IDs: ['39992', '12919', '35248', '54535', '5345', '24260', '30239', '39990', '54518', '26536']
2025-06-08 19:48:33,498 - (api_server.py) - INFO - Generating complementary recommendations...
2025-06-08 19:48:35,293 - (api_server.py) - INFO - Generated caption: a pair of white and blue sneakers on a wooden rail
2025-06-08 19:48:38,452 - (api_server.py) - INFO - Generated 5 complementary items: ['1. Category: Apparel; subCategory: Bottomwear; Article Type: Jeans; Color/Style: Light Wash Denim; Usage: Casual everyday wear', '2. Category: Apparel; subCategory: Bottomwear; Article Type: Chinos; Color/Style: Khaki; Usage: Smart casual or weekend outings', '3. Category: Apparel; subCategory: Bottomwear; Article Type: Joggers; Color/Style: Navy Blue; Usage: Relaxed and comfortable wear', '4. Category: Apparel; subCategory: Bottomwear; Article Type: Shorts; Color/Style: Stone; Usage: Summer activities and casual wear', '5. Category: Apparel; subCategory: Bottomwear; Article Type: Trousers; Color/Style: Dark Grey; Usage: Formal or semi-formal occasions']
2025-06-08 19:48:38,453 - (api_server.py) - INFO - Generated 5 complementary categories
2025-06-08 19:48:38,454 - (api_server.py) - INFO - Complementary categories: ['Apparel', 'Apparel', 'Apparel', 'Apparel', 'Apparel']
2025-06-08 19:48:38,883 - (api_server.py) - INFO - Recommended product IDs: ['32560', '32567', '57075', '20918', '20910', '22787', '22786', '20915', '20913', '58411']
2025-06-08 19:48:38,884 - (api_server.py) - INFO - Clearing output directories...
2025-06-08 19:48:38,896 - (api_server.py) - INFO - Cleared D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts
2025-06-08 19:48:38,905 - (api_server.py) - INFO - Cleared D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts
2025-06-08 19:48:38,911 - (api_server.py) - INFO - 
--- Downloading Recommendation Product Images ---
2025-06-08 19:48:38,912 - (api_server.py) - INFO - Downloading images for 10 products to D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts
2025-06-08 19:48:38,925 - (api_server.py) - INFO - Downloading image for Product ID 20913...
2025-06-08 19:48:39,249 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\20913.jpg
2025-06-08 19:48:39,251 - (api_server.py) - INFO - Downloading image for Product ID 20915...
2025-06-08 19:48:39,361 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\20915.jpg
2025-06-08 19:48:39,362 - (api_server.py) - INFO - Downloading image for Product ID 57075...
2025-06-08 19:48:39,439 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\57075.jpg
2025-06-08 19:48:39,440 - (api_server.py) - INFO - Downloading image for Product ID 58411...
2025-06-08 19:48:39,672 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\58411.jpg
2025-06-08 19:48:39,679 - (api_server.py) - INFO - Downloading image for Product ID 22786...
2025-06-08 19:48:40,044 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\22786.jpg
2025-06-08 19:48:40,050 - (api_server.py) - INFO - Downloading image for Product ID 22787...
2025-06-08 19:48:40,461 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\22787.jpg
2025-06-08 19:48:40,464 - (api_server.py) - INFO - Downloading image for Product ID 32567...
2025-06-08 19:48:40,587 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\32567.jpg
2025-06-08 19:48:40,589 - (api_server.py) - INFO - Downloading image for Product ID 32560...
2025-06-08 19:48:40,741 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\32560.jpg
2025-06-08 19:48:40,747 - (api_server.py) - INFO - Downloading image for Product ID 20910...
2025-06-08 19:48:40,938 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\20910.jpg
2025-06-08 19:48:40,942 - (api_server.py) - INFO - Downloading image for Product ID 20918...
2025-06-08 19:48:41,108 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\recommendProducts\20918.jpg
2025-06-08 19:48:41,109 - (api_server.py) - INFO - 
--- Downloading Similar Product Images ---
2025-06-08 19:48:41,111 - (api_server.py) - INFO - Downloading images for 10 products to D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts
2025-06-08 19:48:41,122 - (api_server.py) - INFO - Downloading image for Product ID 26536...
2025-06-08 19:48:41,472 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\26536.jpg
2025-06-08 19:48:41,482 - (api_server.py) - INFO - Downloading image for Product ID 24260...
2025-06-08 19:48:41,652 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\24260.jpg
2025-06-08 19:48:41,655 - (api_server.py) - INFO - Downloading image for Product ID 54518...
2025-06-08 19:48:41,992 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\54518.jpg
2025-06-08 19:48:41,999 - (api_server.py) - INFO - Downloading image for Product ID 5345...
2025-06-08 19:48:42,324 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\5345.jpg
2025-06-08 19:48:42,327 - (api_server.py) - INFO - Downloading image for Product ID 12919...
2025-06-08 19:48:42,431 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\12919.jpg
2025-06-08 19:48:42,433 - (api_server.py) - INFO - Downloading image for Product ID 54535...
2025-06-08 19:48:42,537 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\54535.jpg
2025-06-08 19:48:42,553 - (api_server.py) - INFO - Downloading image for Product ID 39992...
2025-06-08 19:48:42,645 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\39992.jpg
2025-06-08 19:48:42,649 - (api_server.py) - INFO - Downloading image for Product ID 30239...
2025-06-08 19:48:43,002 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\30239.jpg
2025-06-08 19:48:43,003 - (api_server.py) - INFO - Downloading image for Product ID 35248...
2025-06-08 19:48:43,149 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\35248.jpg
2025-06-08 19:48:43,150 - (api_server.py) - INFO - Downloading image for Product ID 39990...
2025-06-08 19:48:43,402 - (api_server.py) - INFO - Successfully saved image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\data\images\similarProducts\39990.jpg
2025-06-08 19:48:43,405 - (api_server.py) - INFO - 
--- Creating products.js file ---
2025-06-08 19:48:43,406 - (api_server.py) - INFO - Creating products.js file...
2025-06-08 19:48:43,410 - (api_server.py) - INFO - Created 3 base products
2025-06-08 19:48:43,425 - (api_server.py) - INFO - Created 10 similar products
2025-06-08 19:48:43,440 - (api_server.py) - INFO - Created 10 recommended products
2025-06-08 19:48:43,499 - (api_server.py) - INFO - Successfully processed recommendations
2025-06-08 19:48:43,501 - (api_server.py) - INFO - Recommendation process completed successfully
2025-06-08 19:48:43,503 - (api_server.py) - INFO - Received results from recommender
2025-06-08 19:48:43,505 - (api_server.py) - INFO - Converting similar products to dictionary format...
2025-06-08 19:48:43,506 - (api_server.py) - INFO - === Starting DataFrame Conversion ===
2025-06-08 19:48:43,506 - (api_server.py) - INFO - Original DataFrame shape: (10, 5)
2025-06-08 19:48:43,508 - (api_server.py) - INFO - Original DataFrame columns: ['productId', 'text', 'masterCategory', 'subCategory', 'score_img']
2025-06-08 19:48:43,509 - (api_server.py) - INFO - Renaming column text to productName
2025-06-08 19:48:43,511 - (api_server.py) - INFO - Renaming column subCategory to subCategory
2025-06-08 19:48:43,512 - (api_server.py) - INFO - Required columns: ['productId', 'productName', 'articleType', 'subCategory', 'season', 'usage', 'image', 'price']
2025-06-08 19:48:43,516 - (api_server.py) - INFO - Using existing productId column
2025-06-08 19:48:43,518 - (api_server.py) - INFO - Using existing productName column
2025-06-08 19:48:43,520 - (api_server.py) - INFO - Adding missing column: articleType
2025-06-08 19:48:43,522 - (api_server.py) - INFO - Adding missing column: subCategory
2025-06-08 19:48:43,523 - (api_server.py) - INFO - Adding missing column: season
2025-06-08 19:48:43,525 - (api_server.py) - INFO - Adding missing column: usage
2025-06-08 19:48:43,527 - (api_server.py) - INFO - Adding missing column: image
2025-06-08 19:48:43,531 - (api_server.py) - INFO - Adding missing column: price
2025-06-08 19:48:43,543 - (api_server.py) - INFO - Successfully converted DataFrame to dictionary with 10 records
2025-06-08 19:48:43,545 - (api_server.py) - INFO - === DataFrame Conversion Complete ===
2025-06-08 19:48:43,546 - (api_server.py) - INFO - Converted 10 similar products
2025-06-08 19:48:43,547 - (api_server.py) - INFO - Converting recommended products to dictionary format...
2025-06-08 19:48:43,548 - (api_server.py) - INFO - === Starting DataFrame Conversion ===
2025-06-08 19:48:43,549 - (api_server.py) - INFO - Original DataFrame shape: (10, 5)
2025-06-08 19:48:43,550 - (api_server.py) - INFO - Original DataFrame columns: ['productId', 'text', 'masterCategory', 'subCategory', 'score_txt']
2025-06-08 19:48:43,551 - (api_server.py) - INFO - Renaming column text to productName
2025-06-08 19:48:43,553 - (api_server.py) - INFO - Renaming column subCategory to subCategory
2025-06-08 19:48:43,555 - (api_server.py) - INFO - Required columns: ['productId', 'productName', 'articleType', 'subCategory', 'season', 'usage', 'image', 'price']
2025-06-08 19:48:43,559 - (api_server.py) - INFO - Using existing productId column
2025-06-08 19:48:43,562 - (api_server.py) - INFO - Using existing productName column
2025-06-08 19:48:43,562 - (api_server.py) - INFO - Adding missing column: articleType
2025-06-08 19:48:43,566 - (api_server.py) - INFO - Adding missing column: subCategory
2025-06-08 19:48:43,570 - (api_server.py) - INFO - Adding missing column: season
2025-06-08 19:48:43,572 - (api_server.py) - INFO - Adding missing column: usage
2025-06-08 19:48:43,573 - (api_server.py) - INFO - Adding missing column: image
2025-06-08 19:48:43,577 - (api_server.py) - INFO - Adding missing column: price
2025-06-08 19:48:43,584 - (api_server.py) - INFO - Successfully converted DataFrame to dictionary with 10 records
2025-06-08 19:48:43,585 - (api_server.py) - INFO - === DataFrame Conversion Complete ===
2025-06-08 19:48:43,586 - (api_server.py) - INFO - Converted 10 recommended products
2025-06-08 19:48:43,586 - (api_server.py) - INFO - Total processed products - Similar: 10, Recommended: 10
2025-06-08 19:48:43,588 - (api_server.py) - INFO - Cleaned up temporary image: D:\Not Synced Storage\Hackathons\Appian Hackathon\Round 2\Github Repo\Appian_Hackathon\Appian_Hackathon\server\temp\temp_image_-2945333183230953630.jpg
2025-06-08 19:48:43,590 - (api_server.py) - INFO - === Recommendation Processing Complete ===
